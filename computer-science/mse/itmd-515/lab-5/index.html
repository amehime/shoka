<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="優萌初華" href="https://shoka.lostyu.me/rss.xml"><link rel="alternate" type="application/atom+xml" title="優萌初華" href="https://shoka.lostyu.me/atom.xml"><link rel="alternate" type="application/json" title="優萌初華" href="https://shoka.lostyu.me/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="Java"><link rel="canonical" href="https://shoka.lostyu.me/computer-science/mse/itmd-515/lab-5/"><meta name="description" content="# Notes # Administrative Stufff 阅读材料 Goncalves Examples from Java EE 7 Extra Reading (you decide if you want&#x2F;need)  Antonio Goncalves, Beginning Java EE 7, Chapter 4 Antonio Goncalves, Beginning Java"><meta property="og:type" content="article"><meta property="og:title" content="Lab 5. ORM and JPA"><meta property="og:url" content="https://shoka.lostyu.me/computer-science/mse/itmd-515/lab-5/"><meta property="og:site_name" content="優萌初華"><meta property="og:description" content="# Notes # Administrative Stufff 阅读材料 Goncalves Examples from Java EE 7 Extra Reading (you decide if you want&#x2F;need)  Antonio Goncalves, Beginning Java EE 7, Chapter 4 Antonio Goncalves, Beginning Java"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://i.loli.net/2021/02/20/uTgiFmX4LEh9Hex.jpg"><meta property="og:image" content="https://i.loli.net/2021/02/20/6spTgk1lGxnwXJ7.jpg"><meta property="og:image" content="https://i.loli.net/2021/02/20/CAxfLsRrnyzM6tZ.jpg"><meta property="og:image" content="https://i.loli.net/2021/02/23/McrU5lHDWqdQbez.jpg"><meta property="article:published_time" content="2021-02-20T08:46:55.000Z"><meta property="article:modified_time" content="2021-02-20T08:46:55.000Z"><meta property="article:author" content="Ruri Shimotsuki"><meta property="article:tag" content="Java"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://i.loli.net/2021/02/20/uTgiFmX4LEh9Hex.jpg"><meta name="twitter:creator" content="@amehime"><title>Lab 5. ORM and JPA - ITMD 515. Advanced Software Programming - Master of Software Engineering - 计算机科学 | Yume Shoka = 優萌初華 = 有夢書架</title><meta name="generator" content="Hexo 6.3.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">Lab 5. ORM and JPA</h1><div class="meta"><span class="item" title="Created: 2021-02-20 16:46:55"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">Posted on</span> <time itemprop="dateCreated datePublished" datetime="2021-02-20T16:46:55+08:00">2021-02-20</time> </span><span class="item" title="Symbols count in article"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">Symbols count in article</span> <span>27k</span> <span class="text">words</span> </span><span class="item" title="Reading time"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">Reading time</span> <span>25 mins.</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">Yume Shoka</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://img.timelessq.com/images/2022/07/26/009ee927d495427d088feacdda5589be.jpg"></li><li class="item" data-background-image="https://img.timelessq.com/images/2022/07/26/a11995a8254fd4a4038ba59f6bcf5a89.jpg"></li><li class="item" data-background-image="https://img.timelessq.com/images/2022/07/26/31105e606c74614c7f8f7b1d08e1619a.jpg"></li><li class="item" data-background-image="https://img.timelessq.com/images/2022/07/26/6c7f469735b99a6a04773240429dc7e0.jpg"></li><li class="item" data-background-image="https://img.timelessq.com/images/2022/07/26/45766055f1ec1fd8d830f5df0b1756ce.jpg"></li><li class="item" data-background-image="https://img.timelessq.com/images/2022/07/26/7ab81e5e45a86caec012652e2595d6d5.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">Home</a></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/computer-science/" itemprop="item" rel="index" title="In 计算机科学"><span itemprop="name">计算机科学</span></a><meta itemprop="position" content="1"></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/computer-science/mse/" itemprop="item" rel="index" title="In Master of Software Engineering"><span itemprop="name">Master of Software Engineering</span></a><meta itemprop="position" content="2"></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/computer-science/mse/itmd-515/" itemprop="item" rel="index" title="In ITMD 515. Advanced Software Programming"><span itemprop="name">ITMD 515. Advanced Software Programming</span></a><meta itemprop="position" content="3"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="en"><link itemprop="mainEntityOfPage" href="https://shoka.lostyu.me/computer-science/mse/itmd-515/lab-5/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="Ruri Shimotsuki"><meta itemprop="description" content="有夢書架, 琉璃的医学 & 编程笔记"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="優萌初華"></span><div class="body md" itemprop="articleBody"><h1 id="notes"><a class="anchor" href="#notes">#</a> Notes</h1><h2 id="administrative-stufff-阅读材料"><a class="anchor" href="#administrative-stufff-阅读材料">#</a> Administrative Stufff 阅读材料</h2><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2Fnb25jYWwvYWdvbmNhbC1ib29rLWphdmFlZTc=">Goncalves Examples from Java EE 7</span></p><p>Extra Reading (you decide if you want/need)</p><ul><li>Antonio Goncalves, Beginning Java EE 7, Chapter 4</li><li>Antonio Goncalves, Beginning Java EE 7, Chapter 5</li><li>Galvin Library Books 24x7</li></ul><h2 id="thinking-ahead-to-your-fp-期末项目思考"><a class="anchor" href="#thinking-ahead-to-your-fp-期末项目思考">#</a> Thinking Ahead to your FP 期末项目思考</h2><ul><li><p>Think of a domain or model you would like to work with going forward<br>考虑您想继续使用的领域或模型</p><ul><li>Must support multiple Entities<br>必须支持多个实体</li><li>Must support the idea of relationships between Entities<br>必须支持实体之间的关系的想法</li><li>Your overall idea should support 2 different types of users<br>您的总体思路应支持 2 种不同类型的用户</li><li>Specs will follow so you have time to develop your thoughts and ideas along with material<br>规格将随之而来，因此您有时间开发自己的思想和观念以及材料</li></ul></li><li><p>One of the questions on your midterm will be to document your design<br>期中问题之一就是记录您的设计</p></li><li><p>You will introduce your model over the next 2 labs, and continue working with it all semester<br>您将在接下来的两个实验中介绍您的模型，并在整个学期中继续使用它</p></li></ul><h2 id="relational-databases-vs-oop-关系数据库与oop"><a class="anchor" href="#relational-databases-vs-oop-关系数据库与oop">#</a> Relational Databases vs OOP 关系数据库与 OOP</h2><dl><dt>Relational Databases 关系数据库</dt><dd><ul><li>Store data in tables consisting of rows and columns<br>将数据存储在由行和列组成的表中</li><li>Primary keys 主键</li><li>Relationships with other tables via foreign keys or join tables<br>通过外键或联接表与其他表的关系</li></ul></dd><dt>OOP</dt><dd><ul><li>Objects inherit state and behavior from other objects<br>对象从其他对象继承状态和行为</li><li>Can contain other objects as state<br>可以包含其他对象作为状态</li><li>Have references to collections of other objects<br>引用了其他对象的集合</li></ul></dd></dl><h2 id="jpa"><a class="anchor" href="#jpa">#</a> JPA</h2><p>Java Persistence API 的简称，中文名 Java 持久层 API，是 JDK 5.0 注解或 XML 描述对象－关系表的映射关系，并将运行期的实体对象持久化到数据库中。</p><h3 id="jpa-specification-规范"><a class="anchor" href="#jpa-specification-规范">#</a> JPA Specification 规范</h3><ul><li>A specification not an implementation 规范而不是实现<ul><li>EclipseLink is the current reference implementation EclipseLink 是当前的参考实现</li><li><span class="exturl" data-url="aHR0cHM6Ly9hbnRvbmlvZ29uY2FsdmVzLm9yZy8yMDA4LzA5LzI3L2EtYnJpZWYtaGlzdG9yeS1vZi1vYmplY3QtcmVsYXRpb25hbC1tYXBwaW5nLw==">History</span></li></ul></li><li>Abstraction Layer over JDBC and SQL<br>JDBC 和 SQL 上的抽象层</li><li><a target="_blank" rel="noopener" href="https://javaee.github.io/javaee-spec/javadocs/index.html?javax/persistence/package-summary.html"><code>javax.persistence</code> package</a></li><li>JPA Provides<ul><li>Object Relational Mapping (to map relational databases to an object model - entities)<br>对象关系映射（将关系数据库映射到对象模型 - 实体）</li><li>Entity Manager (manage entities, i.e. CRUD)<br>实体管理器（管理实体，即 CRUD）</li><li>JPQL</li><li>Transactions and Locking<br>交易和锁定</li><li>Lifecycle for persistent objects<br>持久对象的生命周期</li><li>Database and/or script generation<br>数据库和 / 或脚本生成</li></ul></li></ul><h3 id="jdbc-vs-jpa"><a class="anchor" href="#jdbc-vs-jpa">#</a> JDBC vs JPA</h3><ul><li>JPA is built on top of JDBC JPA 建立在 JDBC 之上</li><li>Compare and Constrast 比较和对比</li></ul><h3 id="jpa-entities-实例"><a class="anchor" href="#jpa-entities-实例">#</a> JPA Entities 实例</h3><ul><li>Live short-term in memory 短期记忆</li><li>Persistently in database 永久存在数据库中</li><li>POJOs with annotations: 带注释的 POJOs</li></ul><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@Entity</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Book</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token annotation punctuation">@Id</span> <span class="token annotation punctuation">@GeneratedValue</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">String</span> title<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">Float</span> price<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">String</span> description<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">String</span> isbn<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> nbOfPage<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">Boolean</span> illustrations<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token comment">// Getters, setters</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="entity-manager-实体管理"><a class="anchor" href="#entity-manager-实体管理">#</a> Entity Manager 实体管理</h3><ul><li>Central piece of JPA<br>JPA 的核心部分</li><li>API to find, query, create, remove and synchronize entities with databases<br>用于查找、查询、创建、删除实体，并将其与数据库同步的 API</li><li>Manages state and life cycle of entities<br>管理实体的状态和生命周期</li><li><code>EntityManager</code> is an interface implemented by a persistence provider (like EclipseLink)<br><code>EntityManager</code> 是由持久性提供程序（例如 EclipseLink）实现的接口</li><li>Each <code>EntityManager</code> instance is associated with a persistence context<br>每个 <code>EntityManager</code> 实例都与一个持久性环境相关联</li></ul><h4 id="persistence-context-持久环境"><a class="anchor" href="#persistence-context-持久环境">#</a> Persistence Context 持久环境</h4><p><img data-src="https://i.loli.net/2021/02/20/uTgiFmX4LEh9Hex.jpg" alt=""></p><ul><li>A persistence context is a set of managed entity instances at a given time for a given user’s transaction<br>持久性环境，是一组在指定时间给指定用户的管理实体实例</li><li>Persistence Identities are unique within context<br>持久性身份在上下文中是独一无二的</li><li>A first-level cache. Objects live in the persistence context for the duration of the transaction, and are then flushed to the database.<br>一级缓存。对象在交易期间处于持久性环境中，然后冲洗到数据库。</li></ul><h4 id="obtaining-an-entity-manager-创建一个实体管理"><a class="anchor" href="#obtaining-an-entity-manager-创建一个实体管理">#</a> Obtaining an Entity Manager 创建一个实体管理</h4><ul><li>Application Managed (Lab 5) 应用管理<ul><li><code>Persistence.createEntityManagerFactory(&quot;foo&quot;)</code></li><li>Requires EntityTransaction</li></ul></li></ul><blockquote><p>Listing 6-2 in Goncalves</p></blockquote><ul><li>Container Managed (Lab 7) 容器管理<ul><li><code>@PersistenceContext(unitName=&quot;foo&quot;)</code></li><li>Uses JTA for transaction</li></ul></li></ul><blockquote><p>Listing 6-3 in Goncalves</p></blockquote><h4 id="manipulating-entities-crud-操纵实体-crud"><a class="anchor" href="#manipulating-entities-crud-操纵实体-crud">#</a> Manipulating Entities - CRUD 操纵实体 - CRUD</h4><dl><dt>C(reate)</dt><dd><code>EntityManager.persist(e)</code> adds an entity to the current persistence context and inserts to the database if it doesn’t already exist</dd><dt>R(ead)</dt><dd><ul><li><code>EntityManager.find(pk)</code> finds an entity and adds it to the current persistence context</li><li><code>EntityManager.getReference(pk)</code> find an entity and adds it to the current persistence context, but lazily fetches its data</li></ul></dd><dt>U(update)</dt><dd><ul><li><code>EntityManager.merge(e)</code> reattaches a detached entity to the current persistence context and updates the database</li><li>Updating a managed Entity through setters</li></ul></dd><dt>D(delete)</dt><dd><code>EntityManager.remove(e)</code> deletes an entity from the database and detaches it from the current persistence context. Will be GC’d.</dd><dt>Synchronizing 同步</dt><dd><ul><li><code>EntityManager.flush(e)</code> entity to database, no commit</li><li><code>EntityManager.refresh(e)</code> entity from database (overwrite in memory state)</li></ul></dd><dt>Persistence Context</dt><dd><ul><li><code>EntityManager.contains(e)</code> an entity in the current persistence context</li><li><code>EntityManager.clear()</code> empties the current persistence context</li><li><code>EntityManager.detach(e)</code> removes an entity from the current persistence context</li></ul></dd></dl><blockquote><p>Chapter 6, Goncalves Ex 03</p></blockquote><h3 id="entity-life-cycle-生命周期"><a class="anchor" href="#entity-life-cycle-生命周期">#</a> Entity Life Cycle 生命周期</h3><p class="gallery"><img data-src="https://i.loli.net/2021/02/20/6spTgk1lGxnwXJ7.jpg" alt=""><br><img data-src="https://i.loli.net/2021/02/20/CAxfLsRrnyzM6tZ.jpg" alt="" title="Vlad’s Entity Life Cycle"></p><figure class="highlight java"><figcaption data-lang="java"><span>Pet.java</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@Entity</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token annotation punctuation">@Table</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"pet"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token annotation punctuation">@NamedQuery</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"Pet.findPetByName"</span><span class="token punctuation">,</span> query <span class="token operator">=</span> <span class="token string">"select p from Pet p where p.name = :NAME"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token annotation punctuation">@NamedQuery</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"Pet.findAll"</span><span class="token punctuation">,</span> query <span class="token operator">=</span> <span class="token string">"select p from Pet p"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Pet</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token annotation punctuation">@Id</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token annotation punctuation">@GeneratedValue</span><span class="token punctuation">(</span>strategy <span class="token operator">=</span> <span class="token class-name">GenerationType</span><span class="token punctuation">.</span><span class="token constant">IDENTITY</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token annotation punctuation">@NotBlank</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"pet_name"</span><span class="token punctuation">,</span> nullable <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> unique <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token annotation punctuation">@PastOrPresent</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">LocalDate</span> birthDate<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token annotation punctuation">@Transient</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    </pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token annotation punctuation">@Enumerated</span><span class="token punctuation">(</span><span class="token class-name">EnumType</span><span class="token punctuation">.</span><span class="token constant">STRING</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">PetType</span> type<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">Pet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">Pet</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">LocalDate</span> birthDate<span class="token punctuation">,</span> <span class="token class-name">PetType</span> type<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>birthDate <span class="token operator">=</span> birthDate<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> type<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="32"></td><td><pre></pre></td></tr><tr><td data-num="33"></td><td><pre>    <span class="token comment">/**</span></pre></td></tr><tr><td data-num="34"></td><td><pre>     * Get the value of age</pre></td></tr><tr><td data-num="35"></td><td><pre>     *</pre></td></tr><tr><td data-num="36"></td><td><pre>     * @return the value of age</pre></td></tr><tr><td data-num="37"></td><td><pre>     */</pre></td></tr><tr><td data-num="38"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>        <span class="token keyword">return</span> age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="41"></td><td><pre></pre></td></tr><tr><td data-num="42"></td><td><pre>    <span class="token comment">/**</span></pre></td></tr><tr><td data-num="43"></td><td><pre>     * Set the value of age</pre></td></tr><tr><td data-num="44"></td><td><pre>     *</pre></td></tr><tr><td data-num="45"></td><td><pre>     * @param age new value of age</pre></td></tr><tr><td data-num="46"></td><td><pre>     */</pre></td></tr><tr><td data-num="47"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAge</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> age<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="50"></td><td><pre></pre></td></tr><tr><td data-num="51"></td><td><pre>    <span class="token comment">/**</span></pre></td></tr><tr><td data-num="52"></td><td><pre>     * Get the value of birthDate</pre></td></tr><tr><td data-num="53"></td><td><pre>     *</pre></td></tr><tr><td data-num="54"></td><td><pre>     * @return the value of birthDate</pre></td></tr><tr><td data-num="55"></td><td><pre>     */</pre></td></tr><tr><td data-num="56"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">LocalDate</span> <span class="token function">getBirthDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="57"></td><td><pre>        <span class="token keyword">return</span> birthDate<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="58"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="59"></td><td><pre></pre></td></tr><tr><td data-num="60"></td><td><pre>    <span class="token comment">/**</span></pre></td></tr><tr><td data-num="61"></td><td><pre>     * Set the value of birthDate</pre></td></tr><tr><td data-num="62"></td><td><pre>     *</pre></td></tr><tr><td data-num="63"></td><td><pre>     * @param birthDate new value of birthDate</pre></td></tr><tr><td data-num="64"></td><td><pre>     */</pre></td></tr><tr><td data-num="65"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setBirthDate</span><span class="token punctuation">(</span><span class="token class-name">LocalDate</span> birthDate<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="66"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>birthDate <span class="token operator">=</span> birthDate<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="67"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="68"></td><td><pre></pre></td></tr><tr><td data-num="69"></td><td><pre>    <span class="token comment">/**</span></pre></td></tr><tr><td data-num="70"></td><td><pre>     * Get the value of name</pre></td></tr><tr><td data-num="71"></td><td><pre>     *</pre></td></tr><tr><td data-num="72"></td><td><pre>     * @return the value of name</pre></td></tr><tr><td data-num="73"></td><td><pre>     */</pre></td></tr><tr><td data-num="74"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="75"></td><td><pre>        <span class="token keyword">return</span> name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="76"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="77"></td><td><pre></pre></td></tr><tr><td data-num="78"></td><td><pre>    <span class="token comment">/**</span></pre></td></tr><tr><td data-num="79"></td><td><pre>     * Set the value of name</pre></td></tr><tr><td data-num="80"></td><td><pre>     *</pre></td></tr><tr><td data-num="81"></td><td><pre>     * @param name new value of name</pre></td></tr><tr><td data-num="82"></td><td><pre>     */</pre></td></tr><tr><td data-num="83"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="84"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="85"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="86"></td><td><pre></pre></td></tr><tr><td data-num="87"></td><td><pre>    <span class="token comment">/**</span></pre></td></tr><tr><td data-num="88"></td><td><pre>     * Get the value of id</pre></td></tr><tr><td data-num="89"></td><td><pre>     *</pre></td></tr><tr><td data-num="90"></td><td><pre>     * @return the value of id</pre></td></tr><tr><td data-num="91"></td><td><pre>     */</pre></td></tr><tr><td data-num="92"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="93"></td><td><pre>        <span class="token keyword">return</span> id<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="94"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="95"></td><td><pre></pre></td></tr><tr><td data-num="96"></td><td><pre>    <span class="token comment">/**</span></pre></td></tr><tr><td data-num="97"></td><td><pre>     * Set the value of id</pre></td></tr><tr><td data-num="98"></td><td><pre>     *</pre></td></tr><tr><td data-num="99"></td><td><pre>     * @param id new value of id</pre></td></tr><tr><td data-num="100"></td><td><pre>     */</pre></td></tr><tr><td data-num="101"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="102"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="103"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="104"></td><td><pre></pre></td></tr><tr><td data-num="105"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="106"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="107"></td><td><pre>        <span class="token keyword">int</span> hash <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="108"></td><td><pre>        hash <span class="token operator">=</span> <span class="token number">97</span> <span class="token operator">*</span> hash <span class="token operator">+</span> <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="109"></td><td><pre>        <span class="token keyword">return</span> hash<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="110"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="111"></td><td><pre></pre></td></tr><tr><td data-num="112"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="113"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Object</span> that<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="114"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">==</span> that<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="115"></td><td><pre>            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="116"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="117"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>that <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="118"></td><td><pre>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="119"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="120"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> that<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="121"></td><td><pre>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="122"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="123"></td><td><pre></pre></td></tr><tr><td data-num="124"></td><td><pre>        <span class="token keyword">final</span> <span class="token class-name">Pet</span> other <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Pet</span><span class="token punctuation">)</span> that<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="125"></td><td><pre></pre></td></tr><tr><td data-num="126"></td><td><pre>        <span class="token comment">// because I am using a database generated ID, I need to explicitly check entity id's for null</span></pre></td></tr><tr><td data-num="127"></td><td><pre>        <span class="token comment">// if null, they should not be compared</span></pre></td></tr><tr><td data-num="128"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>other<span class="token punctuation">.</span>id <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="129"></td><td><pre>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="130"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="131"></td><td><pre></pre></td></tr><tr><td data-num="132"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">,</span> other<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="133"></td><td><pre>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="134"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="135"></td><td><pre>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="136"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="137"></td><td><pre></pre></td></tr><tr><td data-num="138"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">PetType</span> <span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="139"></td><td><pre>        <span class="token keyword">return</span> type<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="140"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="141"></td><td><pre></pre></td></tr><tr><td data-num="142"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setType</span><span class="token punctuation">(</span><span class="token class-name">PetType</span> type<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="143"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> type<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="144"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="145"></td><td><pre></pre></td></tr><tr><td data-num="146"></td><td><pre>    <span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="147"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="148"></td><td><pre>        <span class="token keyword">return</span> <span class="token string">"Pet&#123;"</span> <span class="token operator">+</span> <span class="token string">"id="</span> <span class="token operator">+</span> id <span class="token operator">+</span> <span class="token string">", name="</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">", birthDate="</span> <span class="token operator">+</span> birthDate <span class="token operator">+</span> <span class="token string">", age="</span> <span class="token operator">+</span> age <span class="token operator">+</span> <span class="token string">", type="</span> <span class="token operator">+</span> type <span class="token operator">+</span> <span class="token char">'&#125;'</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="149"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="150"></td><td><pre></pre></td></tr><tr><td data-num="151"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="tables"><a class="anchor" href="#tables">#</a> Tables</h3><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@Table</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"pet"</span><span class="token punctuation">)</span></pre></td></tr></table></figure><dl><dt><code>@Table</code> (<span class="exturl" data-url="aHR0cDovL3dpa2kuZWNsaXBzZS5vcmcvRWNsaXBzZUxpbmsvVXNlckd1aWRlL0pQQS9CYXNpY19KUEFfRGV2ZWxvcG1lbnQvRW50aXRpZXMvVGFibGU=">Goncalves Ex01</span>)</dt><dd><ul><li>name</li><li>schema</li><li>uniqueConstraints{}</li></ul></dd><dt><code>@SecondaryTable</code> (<span class="exturl" data-url="aHR0cDovL3dpa2kuZWNsaXBzZS5vcmcvRWNsaXBzZUxpbmsvVXNlckd1aWRlL0pQQS9CYXNpY19KUEFfRGV2ZWxvcG1lbnQvRW50aXRpZXMvU2Vjb25kYXJ5VGFibGU=">Goncalves Ex02</span>)</dt><dd>Up until now, an Entity was a table. Sometimes, existing data models spread the data across multiple tables.</dd></dl><p><img data-src="https://i.loli.net/2021/02/23/McrU5lHDWqdQbez.jpg" alt="McrU5lHDWqdQbez"></p><h3 id="equals-and-hashcode"><a class="anchor" href="#equals-and-hashcode">#</a> <code>equals</code> and <code>hashCode</code></h3><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">int</span> hash <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    hash <span class="token operator">=</span> <span class="token number">97</span> <span class="token operator">*</span> hash <span class="token operator">+</span> <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">return</span> hash<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token annotation punctuation">@Override</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Object</span> that<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">==</span> that<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>that <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> that<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token keyword">final</span> <span class="token class-name">Pet</span> other <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Pet</span><span class="token punctuation">)</span> that<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token comment">// because I am using a database generated ID, I need to explicitly check entity id's for null</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token comment">// if null, they should not be compared</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>other<span class="token punctuation">.</span>id <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="27"></td><td><pre></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">,</span> other<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><ul><li>Review <span class="exturl" data-url="aHR0cDovL2RvY3Mub3JhY2xlLmNvbS9qYXZhc2UvdHV0b3JpYWwvamF2YS9JYW5kSS9vYmplY3RjbGFzcy5odG1s">Object as a Superclass</span> in Java SE Tutorial<br>在 Java SE 教程中将对象作为超级类进行审核<ul><li>Also: <span class="exturl" data-url="aHR0cDovL3d3dy5pYm0uY29tL2RldmVsb3BlcndvcmtzL2xpYnJhcnkvai1qdHAwNTI3My8=">IBM Hashing it Out</span></li><li>Also: <span class="exturl" data-url="aHR0cDovL3d3dy5pbmZvcm1pdC5jb20vYXJ0aWNsZXMvYXJ0aWNsZS5hc3B4P3A9MTAyMTU3OSZhbXA7c2VxTnVtPTI=">Understanding Inheritance in Java</span> 了解 Java 的继承</li></ul></li><li>If you override <code>equals</code> , you must override <code>hashCode</code><br>如果你覆盖，你必须覆盖哈希代码</li></ul><dl><dt><code>equals</code></dt><dd>compares two objects, returns true if equal 比较两个对象，返回真实，如果相等</dd><dt><code>hashCode</code></dt><dd>If two objects are equal, their hash codes must also be equal 如果两个对象是相等的，则它们的哈希代码也必须相等<ul><li>By default, returns the memory address 默认情况下，返回内存地址</li><li>Overriding <code>equals</code> invalidates default implementation<br>覆盖 equals 使默认操作无效</li></ul></dd></dl><h3 id="primary-keys-主键"><a class="anchor" href="#primary-keys-主键">#</a> Primary Keys 主键</h3><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@Id</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token annotation punctuation">@GeneratedValue</span><span class="token punctuation">(</span>strategy <span class="token operator">=</span> <span class="token class-name">GenerationType</span><span class="token punctuation">.</span><span class="token constant">IDENTITY</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span></pre></td></tr></table></figure><ul><li>Uniquely identify each row in a table 表中每一行的唯一识别</li><li>JPA <strong>requires</strong> entities to have an identifier mapped to a primary key<br>JPA<strong> 要求</strong>实体将标识符映射到主密钥</li><li>Comprises either single or set of columns 包括单列或单列集<ul><li>Simple Primary Key 单个主键</li><li>Composite Primary Key 复合主键</li></ul></li><li>If you can, stick to a simple key 如果可以，坚持一个简单的键</li><li><span class="exturl" data-url="aHR0cHM6Ly92bGFkbWloYWxjZWEuY29tL2RhdGFiYXNlLXByaW1hcnkta2V5LWZsYXZvcnMv">Natural ID vs Generated (Surrogate) ID</span> 自然 ID vs 生成 （代理） ID</li></ul><h4 id="simple-primary-keys"><a class="anchor" href="#simple-primary-keys">#</a> Simple Primary Keys</h4><dl><dt><code>@Id</code> (<span class="exturl" data-url="aHR0cDovL3dpa2kuZWNsaXBzZS5vcmcvRWNsaXBzZUxpbmsvVXNlckd1aWRlL0pQQS9CYXNpY19KUEFfRGV2ZWxvcG1lbnQvTWFwcGluZy9FbnRpdGllcy9JZHMvSWQ=">Goncalves Ex01 and Ex02</span>)</dt><dd><ul><li>Must correspond to single attribute of entity<br>必须对应实体的单一属性</li><li>Must not change 不能改变</li><li>Allowable types: 允许的类型<ul><li>Primitive Java types 原始 java 类型: <code>byte</code> , <code>int</code> , <code>short</code> , <code>long</code> , <code>char</code></li><li>Wrapper classes of primitive Java types 原始类型的包裹类型: <code>Byte</code> , <code>Integer</code> , <code>Short</code> , <code>Long</code> , <code>Character</code></li><li>Arrays of primitive or wrapper types 数组: <code>int[]</code> , <code>Integer[]</code></li><li>Strings, numbers, and dates: <code>String</code> , <code>BigInteger</code> , <code>Date</code></li></ul></li></ul></dd><dt>Id Generation for Simple PK</dt><dd><ul><li><code>@Id</code> value can be created manually by application or automatically by the provider</li><li><code>@GeneratedValue</code> (<span class="exturl" data-url="aHR0cDovL3dpa2kuZWNsaXBzZS5vcmcvRWNsaXBzZUxpbmsvVXNlckd1aWRlL0pQQS9CYXNpY19KUEFfRGV2ZWxvcG1lbnQvRW50aXRpZXMvSWRzL0dlbmVyYXRlZFZhbHVlJTVE">Goncalves Ex01</span>) has different strategies<ul><li>SEQUENCE</li><li>IDENTITY</li><li>TABLE</li><li>AUTO</li></ul></li></ul></dd></dl><h5 id="option-one-natural-idbusiness-key"><a class="anchor" href="#option-one-natural-idbusiness-key">#</a> Option One - Natural ID/Business Key</h5><p>自然身份证 / 公司密钥</p><blockquote><p>So sayeth Vlad:</p><ul><li><p>“Those entity fields having the property of being unique in the whole entity object space are generally called a business key.”<br>那些在整个实体对象空间中具有唯一性的实体字段通常称为业务密钥。</p></li><li><p>“The business key is also independent of any persistence technology employed in our project architecture, as opposed to a synthetic database auto incremented id.”<br>业务密钥还独立于我们的项目体系结构中采用的任何持久性技术，与合成数据库自动递增的 ID 相对。</p></li><li><p>“So, the business key must be set from the very moment we are creating the Entity and then never change it.”<br>因此，必须从我们创建实体的那一刻起就设置业务密钥，然后再也不要更改它。</p></li></ul></blockquote><ul><li>Decide/Design what attribute(s) determine uniqueness in each of your entities<br>决定 / 设计哪些属性决定每个实体的唯一性<ul><li>ISBN</li><li>UPC Code</li><li>Person ID Number</li><li>Drivers License Number</li><li>Library Card Number</li><li>Serial Number</li><li>First, Last, Middle Name, Sex at Birth, Date of Birth, and Instant of Birth</li><li>SSN</li><li>Some Made Up ID Number</li><li>Etc</li></ul></li><li>These should be unique in your database - whether PK or not<br>这些在您的数据库中应该是唯一的 —— 无论是否为 PK</li><li>These unique identifiers are generated by your application<br>这些唯一标识符由您的应用程序生成</li><li>Use these attribute(s) for your <code>equals</code> and <code>hashCode</code><br>将这些属性用于您的 equals 和 hashCode</li></ul><h5 id="option-two-generated-id"><a class="anchor" href="#option-two-generated-id">#</a> Option Two – Generated ID</h5><ul><li>You can use the database <code>@GeneratedID</code> in<br><code>equals</code> / <code>hashCode</code> provided that<ul><li>You consider <code>null</code> in your <code>equals</code> method, and return <code>false</code> if one of the <strong>entity identifiers</strong> is <code>null</code><br>equals 方法中为 null，并且如果实体标识符之一为 null，则返回 false</li><li><code>hashCode</code> always returns the same value<br>hashCode 总是返回相同的值</li><li><span class="exturl" data-url="aHR0cHM6Ly92bGFkbWloYWxjZWEuY29tL2hvdy10by1pbXBsZW1lbnRlcXVhbHMtYW5kLWhhc2hjb2RlLXVzaW5nLXRoZS1qcGEtZW50aXR5aWRlbnRpZmllci8=">https://vladmihalcea.com/how-to-implementequals-and-hashcode-using-the-jpa-entityidentifier/</span><br>(ref: Fixing the entity identifier equals and hashCode)</li></ul></li></ul><h5 id="option-three-uuid"><a class="anchor" href="#option-three-uuid">#</a> Option Three – UUID</h5><ul><li>If you can’t figure out a business key, and you don’t want to use the database <code>@GeneratedID</code> , you can use UUID:<ul><li>Database agnostic 数据库不可知</li><li>Can be generated by application 可以由应用程序生成</li><li><span class="exturl" data-url="aHR0cHM6Ly92bGFkbWloYWxjZWEuY29tL3V1aWQtaWRlbnRpZmllci1qcGFoaWJlcm5hdGUv">https://vladmihalcea.com/uuid-identifier-jpahibernate/</span> (ref: <code>GenerationType.AUTO</code> )</li></ul></li></ul><blockquote><p>This strategy may need some adjustment for use with EclipseLink, but the fundamentals here are good. <code>@NaturalID</code> is Spring only – don’t use</p></blockquote><h4 id="composite-primary-keys-复合主键"><a class="anchor" href="#composite-primary-keys-复合主键">#</a> Composite Primary Keys 复合主键</h4><ul><li>When it is not possible to use a single column or attribute, JPA supports compound or composite<br>当不可能使用单个列或属性时，JPA 支持混合或复合</li><li>Two strategies, both require separate primary key class<br>两种策略都需要单独的主键类<ul><li>Must implement <code>equals</code> and <code>hashCode</code><br>必须实现 equals 和 hashCode</li><li>public class</li><li>Public accessors and mutators</li><li>Default noarg constructor</li><li>Implement serializable if they need to cross architectural layers</li></ul></li><li>Same database output, but querying is different<br>数据库输出相同，但查询不同</li></ul><h5 id="embeddables-可嵌入的"><a class="anchor" href="#embeddables-可嵌入的">#</a> Embeddables 可嵌入的</h5><dl><dt><code>@Embeddable</code> (<span class="exturl" data-url="aHR0cDovL3dpa2kuZWNsaXBzZS5vcmcvRWNsaXBzZUxpbmsvVXNlckd1aWRlL0pQQS9CYXNpY19KUEFfRGV2ZWxvcG1lbnQvRW50aXRpZXMvRW1iZWRkYWJsZQ==">Goncalves Ex29 and Ex32</span>) <code>@Embedded</code></dt><dd><ul><li>Used with composite primary keys<br>与复合主键一起使用</li><li>Embeddables do not have a persistent identity<br>可嵌入对象没有持久性</li><li>They are embedded in owning entities<br>它们嵌入在拥有的实体中</li><li>If the owning entity is removed, so is the embedded<br>如果拥有实体被删除，则嵌入式实体也被删除</li></ul></dd></dl><h5 id="embedded-composite-primary-key-class"><a class="anchor" href="#embedded-composite-primary-key-class">#</a> Embedded Composite Primary Key Class</h5><dl><dt><code>@Embeddable</code> with <code>@EmbeddedId</code> (<span class="exturl" data-url="aHR0cDovL3dpa2kuZWNsaXBzZS5vcmcvRWNsaXBzZUxpbmsvVXNlckd1aWRlL0pQQS9CYXNpY19KUEFfRGV2ZWxvcG1lbnQvRW50aXRpZXMvSWRzL0VtYmVkZGVkSWQ=">Goncalves Ex04</span>)</dt><dd><ul><li>Create <code>@Embeddable</code> class conforming to above requirements</li><li>Identify primary key class with <code>@EmbeddedId</code> on entity</li></ul></dd></dl><h5 id="nonembedded-composite-primary-key-class"><a class="anchor" href="#nonembedded-composite-primary-key-class">#</a> Nonembedded Composite Primary Key Class</h5><dl><dt><code>@IdClass</code> (<span class="exturl" data-url="aHR0cDovL3dpa2kuZWNsaXBzZS5vcmcvRWNsaXBzZUxpbmsvVXNlckd1aWRlL0pQQS9CYXNpY19KUEFfRGV2ZWxvcG1lbnQvRW50aXRpZXMvSWRzL0lkQ2xhc3M=">Goncalves Ex06</span>)</dt><dd><ul><li>Each field needs to also be declared on entity and annotated with <code>@Id</code><br>每个字段也需要在实体上进行申报，并附上 <code>@Id</code></li><li>Primary key class does not require annotations, but must conform to above requirements<br>主要关键类不需要注释，但必须符合上述要求</li><li>Identify primary key class as <code>@IdClass</code> on entity<br>将主要关键类确定为实体上的 <code>@IdClass</code></li></ul></dd></dl><h5 id="embedded-vs-nonembedded"><a class="anchor" href="#embedded-vs-nonembedded">#</a> Embedded vs NonEmbedded</h5><p>For Composite PK, which way is better?</p><p>What does Vlad think?<br><span class="exturl" data-url="aHR0cHM6Ly92bGFkbWloYWxjZWEuY29tL3RoZS1iZXN0LXdheS10b21hcC1hLWNvbXBvc2l0ZS1wcmltYXJ5LWtleS13aXRoLWpwYS1hbmRoaWJlcm5hdGUv">https://vladmihalcea.com/the-best-way-tomap-a-composite-primary-key-with-jpa-andhibernate/</span></p><h3 id="attributes-属性"><a class="anchor" href="#attributes-属性">#</a> Attributes 属性</h3><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@NotBlank</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"pet_name"</span><span class="token punctuation">,</span> nullable <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> unique <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token annotation punctuation">@PastOrPresent</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">private</span> <span class="token class-name">LocalDate</span> birthDate<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token annotation punctuation">@Transient</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token annotation punctuation">@Enumerated</span><span class="token punctuation">(</span><span class="token class-name">EnumType</span><span class="token punctuation">.</span><span class="token constant">STRING</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">private</span> <span class="token class-name">PetType</span> type<span class="token punctuation">;</span></pre></td></tr></table></figure><dl><dt><code>@Basic</code> (<span class="exturl" data-url="aHR0cDovL3dpa2kuZWNsaXBzZS5vcmcvRWNsaXBzZUxpbmsvVXNlckd1aWRlL0pQQS9CYXNpY19KUEFfRGV2ZWxvcG1lbnQvTWFwcGluZy9CYXNpY19NYXBwaW5ncy9CYXNpYw==">Goncalves Ex09</span>)</dt><dd><ul><li>optional (default true)</li><li>fetch (default FetchType.EAGER)</li></ul></dd><dt><code>@Column</code> (<span class="exturl" data-url="aHR0cDovL3dpa2kuZWNsaXBzZS5vcmcvRWNsaXBzZUxpbmsvVXNlckd1aWRlL0pQQS9CYXNpY19KUEFfRGV2ZWxvcG1lbnQvTWFwcGluZy9CYXNpY19NYXBwaW5ncy9Db2x1bW4=">Goncalves Ex11</span>)</dt><dd><ul><li>Defines the properties for a column such as name, size, unique, nullable, insertable, updateable</li><li>Name</li><li>Unique (default false)</li><li>Nullable (default true)</li><li>Length (default 255)</li></ul></dd><dt><code>@Temporal</code> (<span class="exturl" data-url="aHR0cDovL3dpa2kuZWNsaXBzZS5vcmcvRWNsaXBzZUxpbmsvVXNlckd1aWRlL0pQQS9CYXNpY19KUEFfRGV2ZWxvcG1lbnQvTWFwcGluZy9CYXNpY19NYXBwaW5ncy9UZW1wb3JhbA==">Goncalves Ex14</span>)</dt><dd><ul><li>TemporalType.DATE</li><li>TemporalType.TIME</li><li>TemporalType.TIMESTAMP</li></ul></dd></dl><blockquote><p>No longer required with JPA 2.2 when using the <code>java.time API (LocalDate, LocalTime, LDT)</code></p></blockquote><dl><dt><code>@Transient</code> (<span class="exturl" data-url="aHR0cDovL3dpa2kuZWNsaXBzZS5vcmcvRWNsaXBzZUxpbmsvVXNlckd1aWRlL0pQQS9CYXNpY19KUEFfRGV2ZWxvcG1lbnQvTWFwcGluZy9CYXNpY19NYXBwaW5ncy9UcmFuc2llbnQ=">Goncalves Ex14</span>)</dt><dd><ul><li>A way to not map an attribute to persistent table<br>一种不将属性映射到持久表的方法</li><li>For example, a calculated field<br>例如，计算字段</li></ul></dd><dt><code>@Enumerated</code> (<span class="exturl" data-url="aHR0cDovL3dpa2kuZWNsaXBzZS5vcmcvRWNsaXBzZUxpbmsvVXNlckd1aWRlL0pQQS9CYXNpY19KUEFfRGV2ZWxvcG1lbnQvTWFwcGluZy9CYXNpY19NYXBwaW5ncy9FbnVtZXJhdGVk">Goncalves Ex17</span>) 枚举</dt><dd><ul><li>Can use <code>EnumType.STRING</code> to store data with String as opposed to ordinal<br>可以使用 EnumType.STRING 将数据存储为 String 而不是序数</li><li>Adding a new constant to the top of the enum would re-arrange ordinals…<br>在枚举的顶部添加一个新常量将重新排列序数…</li></ul></dd></dl><figure class="highlight java"><figcaption data-lang="java"><span>PetType.java 枚举类</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">PetType</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    </pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token function">CANINE</span><span class="token punctuation">(</span><span class="token string">"Dog"</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token function">FELINE</span><span class="token punctuation">(</span><span class="token string">"Kitty"</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token function">REPTILE</span><span class="token punctuation">(</span><span class="token string">"Snake"</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token function">RABBIT</span><span class="token punctuation">(</span><span class="token string">"Bunny"</span><span class="token punctuation">)</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token function">FISH</span><span class="token punctuation">(</span><span class="token string">"Fishy"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    </pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">String</span> label<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword">private</span> <span class="token class-name">PetType</span><span class="token punctuation">(</span><span class="token class-name">String</span> label<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>label <span class="token operator">=</span> label<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    </pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getLabel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token keyword">return</span> label<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    </pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="access-type-访问类型"><a class="anchor" href="#access-type-访问类型">#</a> Access Type 访问类型</h3><dl><dt>Field Access (Annotate attributes) 字段访问 (注释属性)</dt><dd><ul><li>Default used in the book</li><li>AccessType.FIELD</li></ul></dd></dl><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@Transient</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span></pre></td></tr></table></figure><dl><dt>Property Access (Annotate getters) 属性访问 (注释获取器)</dt><dd>AccessType.PROPERTY</dd></dl><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@Transient</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">return</span> age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><blockquote><p>Recommendation – be consistent with your choice. (Goncalves Ex20)</p></blockquote><h2 id="jpql"><a class="anchor" href="#jpql">#</a> JPQL</h2><ul><li>What about querying? Everything up until here as been <code>EntityManager.find(pk)</code></li><li>JPQL is an object-oriented query language, in which we are looking for entities or collections of entities<br>JPQL 是一种面向对象的查询语言，我们正在寻找实体或实体集合</li><li>Roots in SQL, but uses standard dot notation<br>基于 SQL，但使用标准点符号</li></ul><h3 id="simplied-jpql-statement-syntax"><a class="anchor" href="#simplied-jpql-statement-syntax">#</a> Simplied JPQL Statement Syntax</h3><figure class="highlight sql"><figcaption data-lang="SQL"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">SELECT</span> <span class="token operator">&lt;</span><span class="token keyword">select</span> clause<span class="token operator">></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">FROM</span> <span class="token operator">&lt;</span><span class="token keyword">from</span> clause<span class="token operator">></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">[</span><span class="token keyword">WHERE</span> <span class="token operator">&lt;</span><span class="token keyword">where</span> clause<span class="token operator">></span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">[</span><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token operator">&lt;</span><span class="token keyword">order</span> <span class="token keyword">by</span> clause<span class="token operator">></span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">[</span><span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token operator">&lt;</span><span class="token keyword">group</span> <span class="token keyword">by</span> clause<span class="token operator">></span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">[</span><span class="token keyword">HAVING</span> <span class="token operator">&lt;</span><span class="token keyword">having</span> clause<span class="token operator">></span><span class="token punctuation">]</span></pre></td></tr></table></figure><h3 id="jpql-tools-and-syntax"><a class="anchor" href="#jpql-tools-and-syntax">#</a> JPQL Tools and Syntax</h3><ul><li>NetBeans JPQL Editor</li><li>Right-click Persistence Unit and choose “Run JPQL Query”</li><li>Goncalves Chapter 6 Ex 21</li></ul><h3 id="dynamic-queries"><a class="anchor" href="#dynamic-queries">#</a> Dynamic Queries</h3><ul><li>Created as needed by the application<br>根据应用程序的需要创建</li><li>“On the fly”</li><li>Can accept named or positional parameters<br>可以接受命名或位置参数</li><li>Use <code>EntityManager.createQuery()</code> method, passing a String representing JPQL query</li></ul><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token class-name">Query</span> query <span class="token operator">=</span> em<span class="token punctuation">.</span><span class="token function">createQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token class-name">TypedQuery</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">></span></span> query <span class="token operator">=</span> em<span class="token punctuation">.</span><span class="token function">createQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre>query<span class="token punctuation">.</span><span class="token function">getResultList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="named-queries"><a class="anchor" href="#named-queries">#</a> Named Queries</h3><figure class="highlight java"><figcaption data-lang="java"><span>Pet.java</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@Entity</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token annotation punctuation">@Table</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"pet"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token annotation punctuation">@NamedQuery</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"Pet.findPetByName"</span><span class="token punctuation">,</span> query <span class="token operator">=</span> <span class="token string">"select p from Pet p where p.name = :NAME"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token annotation punctuation">@NamedQuery</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"Pet.findAll"</span><span class="token punctuation">,</span> query <span class="token operator">=</span> <span class="token string">"select p from Pet p"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Pet</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>···</pre></td></tr></table></figure><ul><li>Similar to <code>PreparedStatement</code></li><li>Static and Unchangeable 静态、不可更改<ul><li>lose flexibility 失去灵活性</li></ul></li><li>Translated to SQL when the application starts<br>程序开始时翻译成 SQL</li><li>gain efficiency and performance<br>提高效率和绩效<ul><li><code>EntityManager.createNamedQuery()</code></li><li>The names of NamedQueries must be unique within persistence context, even across entities<br>NamedQueries 的名称必须在持久性环境中独一无二，即使在实体之间也是如此</li></ul></li></ul><figure class="highlight java"><figcaption data-lang="java"><span>Driver.java</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Driver</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> <span class="token constant">LOG</span> <span class="token operator">=</span> <span class="token class-name">Logger</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">Driver</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token class-name">Pet</span> cat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Pet</span><span class="token punctuation">(</span><span class="token string">"Fluffy"</span><span class="token punctuation">,</span> <span class="token class-name">LocalDate</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2020</span><span class="token punctuation">,</span> <span class="token class-name">Month</span><span class="token punctuation">.</span><span class="token constant">DECEMBER</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">PetType</span><span class="token punctuation">.</span><span class="token constant">FELINE</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token class-name">Pet</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Pet</span><span class="token punctuation">(</span><span class="token string">"Spike"</span><span class="token punctuation">,</span> <span class="token class-name">LocalDate</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2020</span><span class="token punctuation">,</span> <span class="token class-name">Month</span><span class="token punctuation">.</span><span class="token constant">NOVEMBER</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">PetType</span><span class="token punctuation">.</span><span class="token constant">CANINE</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token constant">LOG</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"Before em.persist==========================================>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token constant">LOG</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>cat<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token constant">LOG</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>dog<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token comment">// reading the persistence.xml is the entry point where entities are created as tables</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token class-name">EntityManagerFactory</span> emf <span class="token operator">=</span> <span class="token class-name">Persistence</span><span class="token punctuation">.</span><span class="token function">createEntityManagerFactory</span><span class="token punctuation">(</span><span class="token string">"itmd4515testPU"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token class-name">EntityManager</span> em <span class="token operator">=</span> emf<span class="token punctuation">.</span><span class="token function">createEntityManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token class-name">EntityTransaction</span> tx <span class="token operator">=</span> em<span class="token punctuation">.</span><span class="token function">getTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        tx<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token comment">//</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token comment">// do some JPA work</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        em<span class="token punctuation">.</span><span class="token function">persist</span><span class="token punctuation">(</span>cat<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        em<span class="token punctuation">.</span><span class="token function">persist</span><span class="token punctuation">(</span>dog<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre></pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token constant">LOG</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"After em.persist, before tx.commit ==========================================>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token constant">LOG</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>cat<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token constant">LOG</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>dog<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre></pre></td></tr><tr><td data-num="28"></td><td><pre>        em<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre></pre></td></tr><tr><td data-num="30"></td><td><pre>        <span class="token constant">LOG</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"After em.persist, before tx.commit, after em.flush ==========================================>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        <span class="token constant">LOG</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>cat<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token constant">LOG</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>dog<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre></pre></td></tr><tr><td data-num="34"></td><td><pre>        <span class="token comment">//</span></pre></td></tr><tr><td data-num="35"></td><td><pre>        tx<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre></pre></td></tr><tr><td data-num="37"></td><td><pre>        <span class="token constant">LOG</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"After em.persist, after tx.commit ==========================================>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>        <span class="token constant">LOG</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>cat<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>        <span class="token constant">LOG</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>dog<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre></pre></td></tr><tr><td data-num="41"></td><td><pre>        <span class="token class-name">Pet</span> foundPetFromDatabase <span class="token operator">=</span> em<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token class-name">Pet</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token number">1l</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>        <span class="token constant">LOG</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"Found Pet 1: "</span> <span class="token operator">+</span> foundPetFromDatabase<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre></pre></td></tr><tr><td data-num="44"></td><td><pre>        <span class="token comment">// JPQL query example</span></pre></td></tr><tr><td data-num="45"></td><td><pre>        foundPetFromDatabase <span class="token operator">=</span> em</pre></td></tr><tr><td data-num="46"></td><td><pre>                <span class="token punctuation">.</span><span class="token function">createQuery</span><span class="token punctuation">(</span><span class="token string">"select p from Pet p where p.name = :NAME"</span><span class="token punctuation">,</span> <span class="token class-name">Pet</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="47"></td><td><pre>                <span class="token punctuation">.</span><span class="token function">setParameter</span><span class="token punctuation">(</span><span class="token string">"NAME"</span><span class="token punctuation">,</span> <span class="token string">"Spike"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="48"></td><td><pre>                <span class="token punctuation">.</span><span class="token function">getSingleResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="49"></td><td><pre></pre></td></tr><tr><td data-num="50"></td><td><pre>        <span class="token constant">LOG</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"Found Spike: "</span> <span class="token operator">+</span> foundPetFromDatabase<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="51"></td><td><pre></pre></td></tr><tr><td data-num="52"></td><td><pre>        foundPetFromDatabase <span class="token operator">=</span> em</pre></td></tr><tr><td data-num="53"></td><td><pre>                <span class="token punctuation">.</span><span class="token function">createNamedQuery</span><span class="token punctuation">(</span><span class="token string">"Pet.findPetByName"</span><span class="token punctuation">,</span> <span class="token class-name">Pet</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="54"></td><td><pre>                <span class="token punctuation">.</span><span class="token function">setParameter</span><span class="token punctuation">(</span><span class="token string">"NAME"</span><span class="token punctuation">,</span> <span class="token string">"Fluffy"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="55"></td><td><pre>                <span class="token punctuation">.</span><span class="token function">getSingleResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="56"></td><td><pre></pre></td></tr><tr><td data-num="57"></td><td><pre>        <span class="token constant">LOG</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"Found Fluffy: "</span> <span class="token operator">+</span> foundPetFromDatabase<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="58"></td><td><pre></pre></td></tr><tr><td data-num="59"></td><td><pre>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Pet</span><span class="token punctuation">></span></span> pets <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="60"></td><td><pre>        pets <span class="token operator">=</span> em<span class="token punctuation">.</span><span class="token function">createNamedQuery</span><span class="token punctuation">(</span><span class="token string">"Pet.findAll"</span><span class="token punctuation">,</span> <span class="token class-name">Pet</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResultList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="61"></td><td><pre></pre></td></tr><tr><td data-num="62"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Pet</span> p <span class="token operator">:</span> pets<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="63"></td><td><pre>            <span class="token constant">LOG</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="64"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="65"></td><td><pre></pre></td></tr><tr><td data-num="66"></td><td><pre>        em<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="67"></td><td><pre>        emf<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="68"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="69"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="other-query-apis"><a class="anchor" href="#other-query-apis">#</a> Other Query APIs</h3><ul><li>Criteria API<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre>criteriaQuery<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span>builder<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"first Name"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"Vincent"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure></li><li>Native Queries<br>Allows execution of native SQL through JPA<br>允许通过 JPA 执行原生 SQL</li><li>Stored Procedure Queries<br>Allows execution of existing database SP’s through JPA<br>允许通过 JPA 执行现有数据库 SP's</li><li>Query By Example (QBE or Matcher)</li><li>QueryDSL</li></ul><h1 id="lab"><a class="anchor" href="#lab">#</a> Lab</h1><h2 id="summary"><a class="anchor" href="#summary">#</a> Summary</h2><p>The purpose of this assignment is to learn the basics of ORM and EntityManager operations, demonstrate through JUnit test cases, and to begin the design process for your final project.<br>这项作业的目的是学习 ORM 和 EntityManager 操作的基础知识，通过 JUnit 测试用例进行演示，并开始最终项目的设计过程。</p><h2 id="requirements"><a class="anchor" href="#requirements">#</a> Requirements</h2><h3 id="database-setup"><a class="anchor" href="#database-setup">#</a> Database Setup</h3><p>Use your itmd4515 database and user from Lab 2 - Setup and Introductory Webapp.</p><h3 id="project-setup"><a class="anchor" href="#project-setup">#</a> Project Setup</h3><p>Your uid-fp repository should already be setup, and you should continue pushing your commits into GitHub for this lab.</p><blockquote><p>Deviating from the package convention given above will mean that you can not benefit from Sonar and other automated tools, and I will not be able to fix this. Please follow the specification!</p><p>We will be working in this repository from now until the end of the semester.  Please remember, I will be looking for multiple commits.  Use a prefix of <strong>Lab 5</strong> on your commit messages, for example:</p><ul><li>Lab 5 - Initial Commit</li><li>Lab 5 - Initial entity</li><li>Lab 5 - Test cases</li></ul></blockquote><h3 id="project-requirements"><a class="anchor" href="#project-requirements">#</a> Project Requirements</h3><ol><li><p>First, and most importantly, think about what kind of business domain you would like to work with for the rest of the semester.  There are many examples you could pick from, but you will do your best work if you are engaged in the entities and concepts that underly your code.  If you are stuck and need examples, post a question to Confluence.  If you pick your domain now, then you will be able to continue building on this code for future labs and projects, thereby making your efforts cumulative.  Some example ideas include:<br>首先，也是最重要的一点，请考虑在本学期的剩余时间里要使用哪种业务领域。您可以从许多示例中进行选择，但是如果您参与代码背后的实体和概念，则将尽力而为。如果您陷入困境并需要示例，请向 Confluence 发表问题。如果您现在选择域，那么您将能够继续在此代码上构建以用于将来的实验室和项目，从而使您的工作不断积累。一些示例想法包括：</p><ol><li>Library</li><li>Education/Learning (like Blackboard)</li><li>Sports</li><li>Music</li><li>Retail</li><li>Hospitality</li><li>Medical/Insurance</li><li>Inventory or other ERP function</li></ol></li><li><p>Move your <a href="/computer-science/mse/itmd-515/lab-4/">Lab 4 - Web Applications, Servlet and JSP</a> classes into a separate package.  I named mine Lab 4.  We'll clean these up completely and remove them in a future lab.</p></li><li><p>Create a RESOURCE_LOCAL <code>Persistence Unit</code> named <strong>itmd4515testPU</strong> connecting to your <strong>itmd4515</strong> database using the <strong>itmd4515</strong> user.  Use the <code>persistence.xml</code> configuration we discussed in class to drop-and-create the tables.<br>创建一个名为<strong> itmd4515testPU</strong> 的 RESOURCE_LOCAL 持久性单元，使用<strong> itmd4515</strong> 用户连接到<strong> itmd4515</strong> 数据库。使用我们在课堂上讨论过的 <code>persistence.xml</code> 配置来拖放表。</p><p>+++code</p><figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>persistence</span> <span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2.2<span class="token punctuation">"</span></span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://java.sun.com/xml/ns/persistence<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_2_2.xsd<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">&lt;!-- Define Persistence Unit --></span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>persistence-unit</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>itmd4515testPU<span class="token punctuation">"</span></span> <span class="token attr-name">transaction-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>RESOURCE_LOCAL<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclude-unlisted-classes</span><span class="token punctuation">></span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclude-unlisted-classes</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>javax.persistence.jdbc.url<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>jdbc:mysql://localhost:3306/itmd4515?zeroDateTimeBehavior=CONVERT_TO_NULL<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>javax.persistence.jdbc.user<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>itmd4515<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>javax.persistence.jdbc.driver<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.mysql.cj.jdbc.Driver<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>javax.persistence.jdbc.password<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>itmd4515<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>javax.persistence.schema-generation.database.action<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>drop-and-create<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>persistence-unit</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>persistence</span><span class="token punctuation">></span></span></pre></td></tr></table></figure><p>+++</p></li><li><p>Add the following dependencies to your  <code>pom.xml</code> :</p><ol><li><p><code>org.eclipse.persistence.jpa</code> <code>2.7.6</code></p></li><li><p><code>junit</code> (latest non-beta version of junit 5)</p></li><li><p><code>Bean Validation</code> (as we did in <a href="/computer-science/mse/itmd-515/lab-3/">Lab 3 - Junit, JDBC and Bean Validation</a>)</p></li><li><p><code>mysql-connector-java</code> (latest non-beta version of 8)</p><blockquote><p>Use appropriate scope for all your dependencies. Why are these dependencies required if we already have the javaee-api in our pom.xml?<br>对所有依赖项使用适当的范围。如果我们在 pom.xml 中已经有了 javaee-api，为什么需要这些依赖关系？</p><p>Make sure your group, artifact and version look like this, and that you include the build and plugins section as per <a href="/computer-science/mse/itmd-515/lab-3/">Lab 3 - Junit, JDBC and Bean Validation</a>.  <strong>Remember, when you use NetBeans to generate persistence related configuration or code files (such as I did with the Persistence Unit) NetBeans adds additional dependencies to your pom.xml for you.  Clean it up and make sure yours looks like this:</strong></p></blockquote><figure class="highlight xml"><figcaption data-lang="XML"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.eclipse.persistence<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>org.eclipse.persistence.jpa<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.7.7<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.junit.jupiter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>junit-jupiter-engine<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>5.7.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>8.0.23<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="21"></td><td><pre></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.hibernate<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>hibernate-validator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>7.0.0.Final<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="28"></td><td><pre></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.glassfish<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>javax.el<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="33"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="35"></td><td><pre></pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="37"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.hibernate<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="38"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>hibernate-validator-cdi<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="39"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>7.0.0.Final<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="40"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="41"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="42"></td><td><pre>...</pre></td></tr><tr><td data-num="43"></td><td><pre><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="44"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="45"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.apache.maven.plugins<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="46"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>maven-surefire-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="47"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.22.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="48"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="49"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="50"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.apache.maven.plugins<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="51"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>maven-failsafe-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="52"></td><td><pre>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.22.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="53"></td><td><pre>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="54"></td><td><pre>...</pre></td></tr></table></figure></li></ol></li><li><p>Create an Entity as demonstrated in class.  This should be a central and important concept to your business domain.  <em><strong>Do not</strong></em> implement <strong>User</strong>, <strong>Group</strong> or <strong>Role</strong> (in the context of security).  We will do that in a later lab.  Focus on the <strong>business</strong> or <strong>enterprise</strong> aspects of your domain.<br>创建一个实体，如在课堂上演示的。对于您的业务领域，这应该是一个重要的重要概念。 <em><strong>请勿</strong></em>实施<strong>用户</strong>，<strong>组</strong>或<strong>角色</strong>（在安全方面）。我们将在以后的实验室中进行。专注于域的 “业务” 或 “企业” 方面。</p><ol><li><p>Use an appropriate PK strategy, and use an appropriate data type for your PK (as per the options discussed in class)<br>使用适当的 PK 策略，并为您的 PK 使用适当的数据类型（根据课程中讨论的选项）</p></li><li><p>Include appropriate equals and hashCode methods for your PK strategy<br>为您的 PK 策略包括适当的 equals 和 hashCode 方法</p></li><li><p>Include at least one temporal data type<br>包括至少一种时间数据类型</p></li><li><p>Include at least three different data types.  There is no limit to the number of attributes you can include.  Your attributes should be sufficient to represent your entity.  Exercise good design and judgment.<br>至少包括三种不同的数据类型。您可以包含的属性数量没有限制。您的属性应足以代表您的实体。进行良好的设计和判断。</p></li><li><p>Include appropriate Constructors, accessors and mutators<br>包括适当的构造函数，访问器和修改器</p></li><li><p>Include appropriate bean validation constraints based on your database types and sizes<br>根据数据库类型和大小包括适当的 bean 验证约束</p></li><li><p>Include appropriate toString method for formatted output<br>包括适当的 toString 方法以格式化输出</p></li></ol></li><li><p>Document the following on your wiki page:</p><ol><li>Paragraph that describes the business domain you have chosen to work with, and why.<br>描述您选择使用的业务领域的段落，以及原因。</li><li>Write a second paragraph answering the following questions: There is only one entity required for Lab 5, but what other entities from your business domain can you think of?  How might they relate to one another?  You can answer this in narrative form, or you can answer it with a database diagram.  One of your midterm questions will be very similar, about the design of your FP, so this is to help get you started early.<br>写第二段回答以下问题：实验 5 仅需要一个实体，但是您能想到您业务领域中的其他哪个实体？它们可能如何相互联系？您可以以叙述形式回答此问题，也可以使用数据库图来回答。关于 FP 的设计，您的期中问题之一将非常相似，因此这有助于您早日入门。</li></ol></li><li><p>Create a JUnit test class as demonstrated in class<br>创建一个 JUnit 测试类，如在类中演示的</p><p>For additional examples (beyond my in-class demonstration) you can refer to Goncalves sample code Chapter 06 - JPA Managing and Querying ex03.<br>有关其他示例（除了我的课堂演示之外），您可以参考 Goncalves 示例代码第 06 章 - JPA 管理和查询 ex03。</p><ol><li>You must use  <code>EntityManagerFactory</code>  to create an  <code>EntityManager</code> .  You <strong>may not</strong> use JDBC on this lab.</li><li>Make appropriate use of JUnit test fixtures as discussed in class, to obtain an EntityManager and also to stage consistent test data for your assertions<br>适当使用课堂上讨论的 JUnit 测试夹具，获取实体管理器，并为您的断言提供一致的测试数据</li><li>Include test methods for CRUD functionality<ol><li>Create - <code>em.persist</code></li><li>Read - <code>em.find</code> and print to standard output</li><li>Update - entity mutators (set methods) within a transaction</li><li>Delete - <code>em.remove</code></li></ol></li><li>Use at least one assertion in each test method to check pass/fail<br>在每个测试方法中使用至少一个断言来检查通过 / 失败</li><li><strong>You must implement all test cases for your entity class</strong><br>您必须为实体类实施所有测试案例</li></ol><details><summary>code</summary><div><figure class="highlight java"><figcaption data-lang="java"><span>AbstractJPATest.java</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractJPATest</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> <span class="token constant">LOG</span> <span class="token operator">=</span> <span class="token class-name">Logger</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">AbstractJPATest</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    </pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">EntityManagerFactory</span> emf<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">protected</span> <span class="token class-name">EntityManager</span> em<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">protected</span> <span class="token class-name">EntityTransaction</span> tx<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    </pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token annotation punctuation">@BeforeAll</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">beforeAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        emf <span class="token operator">=</span> <span class="token class-name">Persistence</span><span class="token punctuation">.</span><span class="token function">createEntityManagerFactory</span><span class="token punctuation">(</span><span class="token string">"itmd4515testPU"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    </pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token annotation punctuation">@BeforeEach</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        em <span class="token operator">=</span> emf<span class="token punctuation">.</span><span class="token function">createEntityManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        tx <span class="token operator">=</span> em<span class="token punctuation">.</span><span class="token function">getTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        </pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token comment">// just like our JDBC test cases - let's stage some consistent test</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token comment">// data to work with across our test classes</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token class-name">Pet</span> test <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Pet</span><span class="token punctuation">(</span><span class="token string">"TESTPET"</span><span class="token punctuation">,</span> <span class="token class-name">LocalDate</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2020</span><span class="token punctuation">,</span> <span class="token class-name">Month</span><span class="token punctuation">.</span><span class="token constant">DECEMBER</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">PetType</span><span class="token punctuation">.</span><span class="token constant">FELINE</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        tx<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        em<span class="token punctuation">.</span><span class="token function">persist</span><span class="token punctuation">(</span>test<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        tx<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        </pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token constant">LOG</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"beforeEach\t"</span> <span class="token operator">+</span> test<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    </pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token annotation punctuation">@AfterEach</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterEach</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        <span class="token comment">// just like our JDBC test cases - let's clean up our test data</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token comment">// after each test case</span></pre></td></tr><tr><td data-num="33"></td><td><pre>        <span class="token class-name">Pet</span> test <span class="token operator">=</span> em</pre></td></tr><tr><td data-num="34"></td><td><pre>                <span class="token punctuation">.</span><span class="token function">createNamedQuery</span><span class="token punctuation">(</span><span class="token string">"Pet.findPetByName"</span><span class="token punctuation">,</span> <span class="token class-name">Pet</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="35"></td><td><pre>                <span class="token punctuation">.</span><span class="token function">setParameter</span><span class="token punctuation">(</span><span class="token string">"NAME"</span><span class="token punctuation">,</span> <span class="token string">"TESTPET"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="36"></td><td><pre>                <span class="token punctuation">.</span><span class="token function">getSingleResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>        </pre></td></tr><tr><td data-num="38"></td><td><pre>        tx<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>        em<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>test<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>        tx<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>        </pre></td></tr><tr><td data-num="42"></td><td><pre>        em<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>    </pre></td></tr><tr><td data-num="45"></td><td><pre>    <span class="token annotation punctuation">@AfterAll</span></pre></td></tr><tr><td data-num="46"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">afterAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>        emf<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>    </pre></td></tr><tr><td data-num="50"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight java"><figcaption data-lang="java"><span>PetJPATest.java</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PetJPATest</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractJPATest</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token comment">// example "sunny day" test - expecting success</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token annotation punctuation">@Test</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testCreateShouldPass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token comment">// create an entity</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token class-name">Pet</span> cat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Pet</span><span class="token punctuation">(</span><span class="token string">"Fluffy"</span><span class="token punctuation">,</span> <span class="token class-name">LocalDate</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2020</span><span class="token punctuation">,</span> <span class="token class-name">Month</span><span class="token punctuation">.</span><span class="token constant">DECEMBER</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">PetType</span><span class="token punctuation">.</span><span class="token constant">FELINE</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        tx<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        em<span class="token punctuation">.</span><span class="token function">persist</span><span class="token punctuation">(</span>cat<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        tx<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token comment">// assert success</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token function">assertNotNull</span><span class="token punctuation">(</span>cat<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token function">assertTrue</span><span class="token punctuation">(</span>cat<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">1l</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token comment">// clean up after yourself</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        tx<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        em<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>cat<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        tx<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="21"></td><td><pre></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token comment">// example "rainy day" test - expecting failure</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token annotation punctuation">@Test</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testCreateShouldFail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token comment">// create an entity</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token class-name">Pet</span> cat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Pet</span><span class="token punctuation">(</span><span class="token string">"TESTPET"</span><span class="token punctuation">,</span> <span class="token class-name">LocalDate</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2020</span><span class="token punctuation">,</span> <span class="token class-name">Month</span><span class="token punctuation">.</span><span class="token constant">DECEMBER</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">PetType</span><span class="token punctuation">.</span><span class="token constant">FELINE</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre></pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token function">assertThrows</span><span class="token punctuation">(</span><span class="token class-name">RollbackException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>            tx<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>            em<span class="token punctuation">.</span><span class="token function">persist</span><span class="token punctuation">(</span>cat<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>            tx<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="34"></td><td><pre></pre></td></tr><tr><td data-num="35"></td><td><pre>    <span class="token annotation punctuation">@Test</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testRead</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>        <span class="token comment">// find a pet from the database</span></pre></td></tr><tr><td data-num="38"></td><td><pre>        <span class="token class-name">Pet</span> test <span class="token operator">=</span> em</pre></td></tr><tr><td data-num="39"></td><td><pre>                <span class="token punctuation">.</span><span class="token function">createNamedQuery</span><span class="token punctuation">(</span><span class="token string">"Pet.findPetByName"</span><span class="token punctuation">,</span> <span class="token class-name">Pet</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="40"></td><td><pre>                <span class="token punctuation">.</span><span class="token function">setParameter</span><span class="token punctuation">(</span><span class="token string">"NAME"</span><span class="token punctuation">,</span> <span class="token string">"TESTPET"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="41"></td><td><pre>                <span class="token punctuation">.</span><span class="token function">getSingleResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>        </pre></td></tr><tr><td data-num="43"></td><td><pre>        <span class="token function">assertNotNull</span><span class="token punctuation">(</span>test<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>        <span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">"TESTPET"</span><span class="token punctuation">,</span> test<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="46"></td><td><pre></pre></td></tr><tr><td data-num="47"></td><td><pre>    <span class="token annotation punctuation">@Test</span></pre></td></tr><tr><td data-num="48"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>        <span class="token comment">// find a pet from the database</span></pre></td></tr><tr><td data-num="50"></td><td><pre>        <span class="token class-name">Pet</span> test <span class="token operator">=</span> em</pre></td></tr><tr><td data-num="51"></td><td><pre>                <span class="token punctuation">.</span><span class="token function">createNamedQuery</span><span class="token punctuation">(</span><span class="token string">"Pet.findPetByName"</span><span class="token punctuation">,</span> <span class="token class-name">Pet</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="52"></td><td><pre>                <span class="token punctuation">.</span><span class="token function">setParameter</span><span class="token punctuation">(</span><span class="token string">"NAME"</span><span class="token punctuation">,</span> <span class="token string">"TESTPET"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="53"></td><td><pre>                <span class="token punctuation">.</span><span class="token function">getSingleResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="54"></td><td><pre></pre></td></tr><tr><td data-num="55"></td><td><pre>        <span class="token comment">// update something about this, but be careful - the afterEach em.remove</span></pre></td></tr><tr><td data-num="56"></td><td><pre>        <span class="token comment">// still needs to work.  In my case - that means watch out for the name</span></pre></td></tr><tr><td data-num="57"></td><td><pre>        tx<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="58"></td><td><pre>        test<span class="token punctuation">.</span><span class="token function">setType</span><span class="token punctuation">(</span><span class="token class-name">PetType</span><span class="token punctuation">.</span><span class="token constant">FISH</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="59"></td><td><pre>        tx<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="60"></td><td><pre>        </pre></td></tr><tr><td data-num="61"></td><td><pre>        <span class="token comment">// next, read it back from the database and assert your update was OK</span></pre></td></tr><tr><td data-num="62"></td><td><pre>        test <span class="token operator">=</span> em<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token class-name">Pet</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> test<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="63"></td><td><pre>        <span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token class-name">PetType</span><span class="token punctuation">.</span><span class="token constant">FISH</span><span class="token punctuation">,</span> test<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="64"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="65"></td><td><pre></pre></td></tr><tr><td data-num="66"></td><td><pre>    <span class="token annotation punctuation">@Test</span></pre></td></tr><tr><td data-num="67"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDelete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="68"></td><td><pre>        <span class="token comment">// create an entity</span></pre></td></tr><tr><td data-num="69"></td><td><pre>        <span class="token class-name">Pet</span> cat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Pet</span><span class="token punctuation">(</span><span class="token string">"Fluffy"</span><span class="token punctuation">,</span> <span class="token class-name">LocalDate</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2020</span><span class="token punctuation">,</span> <span class="token class-name">Month</span><span class="token punctuation">.</span><span class="token constant">DECEMBER</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">PetType</span><span class="token punctuation">.</span><span class="token constant">FELINE</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="70"></td><td><pre>        tx<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="71"></td><td><pre>        em<span class="token punctuation">.</span><span class="token function">persist</span><span class="token punctuation">(</span>cat<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="72"></td><td><pre>        tx<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="73"></td><td><pre></pre></td></tr><tr><td data-num="74"></td><td><pre>        <span class="token comment">// assert created OK</span></pre></td></tr><tr><td data-num="75"></td><td><pre>        <span class="token function">assertNotNull</span><span class="token punctuation">(</span>cat<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="76"></td><td><pre>        </pre></td></tr><tr><td data-num="77"></td><td><pre>        <span class="token comment">// remove it</span></pre></td></tr><tr><td data-num="78"></td><td><pre>        tx<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="79"></td><td><pre>        em<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>cat<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="80"></td><td><pre>        tx<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="81"></td><td><pre>        </pre></td></tr><tr><td data-num="82"></td><td><pre>        <span class="token comment">// assert it was removed OK by trying to re-find it from the database</span></pre></td></tr><tr><td data-num="83"></td><td><pre>        cat <span class="token operator">=</span> em<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token class-name">Pet</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> cat<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="84"></td><td><pre>        <span class="token function">assertNull</span><span class="token punctuation">(</span>cat<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="85"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="86"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></div></details></li><li><p>Document in your wiki page by adding code block(s) containing the output of your Test class.  Clearly identify each operation and discuss what is being tested.<br>添加包含测试类输出的代码块到文档。清楚地识别每个操作并讨论正在测试的内容。</p></li><li><p>Submit to Blackboard</p><ol><li>Right your <strong>uid-fp</strong> project and select &quot;Clean&quot;</li><li>Go to your NetBeans Projects directory.  Create a zip file of the <strong>uid-fp</strong> folder and submit it to the Blackboard assignment.</li></ol></li></ol><h3 id="extra-credit-5-points"><a class="anchor" href="#extra-credit-5-points">#</a> Extra Credit (5 Points)</h3><ol><li>Include a second JUnit test class for bean validation.  <strong>Do not mix</strong> JPA and Validation test cases, keep them within their respective test class.<br>包括第二个 JUnit 测试类以进行 bean 验证。 <strong>请勿混用</strong> JPA 和 Validation 测试用例，请将它们放在各自的测试类中。</li><li>Use abstraction to keep generic functionality and test fixtures at a more re-usable level in your test cases.<br>使用抽象可将通用功能和测试装置保持在测试用例中更可重用的级别。</li><li>Include pass/fail (sunny-day/rainy-day) test cases for each of your validation constraints.<br>为每个验证约束包括通过 / 失败（晴天 / 阴雨天）测试用例。</li></ol><div class="tags"><a href="/tags/Java/" rel="tag"><i class="ic i-tag"></i> Java</a></div></div><footer><div class="meta"><span id="computer-science/mse/itmd-515/lab-5/" class="item leancloud_visitors" data-flag-title="Lab 5. ORM and JPA" title="Views"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">Views</span> <span class="leancloud-visitors-count"></span> <span class="text">times</span></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/images/wechatpay.png" alt="Ruri Shimotsuki 微信支付"><p>微信支付</p></div><div><img data-src="/images/alipay.png" alt="Ruri Shimotsuki 支付宝"><p>支付宝</p></div><div><img data-src="/images/paypal.png" alt="Ruri Shimotsuki 贝宝"><p>贝宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>Post author: </strong>Ruri Shimotsuki <i class="ic i-at"><em>@</em></i>優萌初華</li><li class="link"><strong>Post link: </strong><a href="https://shoka.lostyu.me/computer-science/mse/itmd-515/lab-5/" title="Lab 5. ORM and JPA">https://shoka.lostyu.me/computer-science/mse/itmd-515/lab-5/</a></li><li class="license"><strong>Copyright Notice: </strong>All articles in this blog are licensed under <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> unless stating additionally.</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/computer-science/mse/itmm-571/lecture-3/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;img.timelessq.com&#x2F;images&#x2F;2022&#x2F;07&#x2F;26&#x2F;2b0a8c81d91579602eee343aff82c4c9.jpg" title="Lecture 3. Communications Management"><span class="type">Previous Post</span> <span class="category"><i class="ic i-flag"></i> ITMM 571. Project Management</span><h3>Lecture 3. Communications Management</h3></a></div><div class="item right"><a href="/computer-science/mse/itmd-515/lab-6/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;img.timelessq.com&#x2F;images&#x2F;2022&#x2F;07&#x2F;26&#x2F;560306a4274d1fc26eb475dd52237387.jpg" title="Lab 6. JPA Relationships"><span class="type">Next Post</span> <span class="category"><i class="ic i-flag"></i> ITMD 515. Advanced Software Programming</span><h3>Lab 6. JPA Relationships</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="Contents"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#notes"><span class="toc-number">1.</span> <span class="toc-text">Notes</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#administrative-stufff-%E9%98%85%E8%AF%BB%E6%9D%90%E6%96%99"><span class="toc-number">1.1.</span> <span class="toc-text">Administrative Stufff 阅读材料</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#thinking-ahead-to-your-fp-%E6%9C%9F%E6%9C%AB%E9%A1%B9%E7%9B%AE%E6%80%9D%E8%80%83"><span class="toc-number">1.2.</span> <span class="toc-text">Thinking Ahead to your FP 期末项目思考</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#relational-databases-vs-oop-%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%8Eoop"><span class="toc-number">1.3.</span> <span class="toc-text">Relational Databases vs OOP 关系数据库与 OOP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#jpa"><span class="toc-number">1.4.</span> <span class="toc-text">JPA</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#jpa-specification-%E8%A7%84%E8%8C%83"><span class="toc-number">1.4.1.</span> <span class="toc-text">JPA Specification 规范</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#jdbc-vs-jpa"><span class="toc-number">1.4.2.</span> <span class="toc-text">JDBC vs JPA</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#jpa-entities-%E5%AE%9E%E4%BE%8B"><span class="toc-number">1.4.3.</span> <span class="toc-text">JPA Entities 实例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#entity-manager-%E5%AE%9E%E4%BD%93%E7%AE%A1%E7%90%86"><span class="toc-number">1.4.4.</span> <span class="toc-text">Entity Manager 实体管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#persistence-context-%E6%8C%81%E4%B9%85%E7%8E%AF%E5%A2%83"><span class="toc-number">1.4.4.1.</span> <span class="toc-text">Persistence Context 持久环境</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#obtaining-an-entity-manager-%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%9E%E4%BD%93%E7%AE%A1%E7%90%86"><span class="toc-number">1.4.4.2.</span> <span class="toc-text">Obtaining an Entity Manager 创建一个实体管理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#manipulating-entities-crud-%E6%93%8D%E7%BA%B5%E5%AE%9E%E4%BD%93-crud"><span class="toc-number">1.4.4.3.</span> <span class="toc-text">Manipulating Entities - CRUD 操纵实体 - CRUD</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#entity-life-cycle-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">1.4.5.</span> <span class="toc-text">Entity Life Cycle 生命周期</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tables"><span class="toc-number">1.4.6.</span> <span class="toc-text">Tables</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#equals-and-hashcode"><span class="toc-number">1.4.7.</span> <span class="toc-text">equals and hashCode</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#primary-keys-%E4%B8%BB%E9%94%AE"><span class="toc-number">1.4.8.</span> <span class="toc-text">Primary Keys 主键</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#simple-primary-keys"><span class="toc-number">1.4.8.1.</span> <span class="toc-text">Simple Primary Keys</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#option-one-natural-idbusiness-key"><span class="toc-number">1.4.8.1.1.</span> <span class="toc-text">Option One - Natural ID&#x2F;Business Key</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#option-two-generated-id"><span class="toc-number">1.4.8.1.2.</span> <span class="toc-text">Option Two – Generated ID</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#option-three-uuid"><span class="toc-number">1.4.8.1.3.</span> <span class="toc-text">Option Three – UUID</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#composite-primary-keys-%E5%A4%8D%E5%90%88%E4%B8%BB%E9%94%AE"><span class="toc-number">1.4.8.2.</span> <span class="toc-text">Composite Primary Keys 复合主键</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#embeddables-%E5%8F%AF%E5%B5%8C%E5%85%A5%E7%9A%84"><span class="toc-number">1.4.8.2.1.</span> <span class="toc-text">Embeddables 可嵌入的</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#embedded-composite-primary-key-class"><span class="toc-number">1.4.8.2.2.</span> <span class="toc-text">Embedded Composite Primary Key Class</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#nonembedded-composite-primary-key-class"><span class="toc-number">1.4.8.2.3.</span> <span class="toc-text">Nonembedded Composite Primary Key Class</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#embedded-vs-nonembedded"><span class="toc-number">1.4.8.2.4.</span> <span class="toc-text">Embedded vs NonEmbedded</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#attributes-%E5%B1%9E%E6%80%A7"><span class="toc-number">1.4.9.</span> <span class="toc-text">Attributes 属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#access-type-%E8%AE%BF%E9%97%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.4.10.</span> <span class="toc-text">Access Type 访问类型</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#jpql"><span class="toc-number">1.5.</span> <span class="toc-text">JPQL</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#simplied-jpql-statement-syntax"><span class="toc-number">1.5.1.</span> <span class="toc-text">Simplied JPQL Statement Syntax</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#jpql-tools-and-syntax"><span class="toc-number">1.5.2.</span> <span class="toc-text">JPQL Tools and Syntax</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dynamic-queries"><span class="toc-number">1.5.3.</span> <span class="toc-text">Dynamic Queries</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#named-queries"><span class="toc-number">1.5.4.</span> <span class="toc-text">Named Queries</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#other-query-apis"><span class="toc-number">1.5.5.</span> <span class="toc-text">Other Query APIs</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#lab"><span class="toc-number">2.</span> <span class="toc-text">Lab</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#summary"><span class="toc-number">2.1.</span> <span class="toc-text">Summary</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#requirements"><span class="toc-number">2.2.</span> <span class="toc-text">Requirements</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#database-setup"><span class="toc-number">2.2.1.</span> <span class="toc-text">Database Setup</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#project-setup"><span class="toc-number">2.2.2.</span> <span class="toc-text">Project Setup</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#project-requirements"><span class="toc-number">2.2.3.</span> <span class="toc-text">Project Requirements</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#extra-credit-5-points"><span class="toc-number">2.2.4.</span> <span class="toc-text">Extra Credit (5 Points)</span></a></li></ol></li></ol></li></ol></div><div class="related panel pjax" data-title="Related"><ul><li><a href="/computer-science/mse/itmd-515/lab-3/" rel="bookmark" title="Lab 3. Junit, JDBC and Bean Validation">Lab 3. Junit, JDBC and Bean Validation</a></li><li><a href="/computer-science/mse/itmd-515/lab-4/" rel="bookmark" title="Lab 4. Web Applications, Servlet and JSP">Lab 4. Web Applications, Servlet and JSP</a></li><li class="active"><a href="/computer-science/mse/itmd-515/lab-5/" rel="bookmark" title="Lab 5. ORM and JPA">Lab 5. ORM and JPA</a></li><li><a href="/computer-science/mse/itmd-515/lab-6/" rel="bookmark" title="Lab 6. JPA Relationships">Lab 6. JPA Relationships</a></li><li><a href="/computer-science/mse/itmd-515/lab-7/" rel="bookmark" title="Lab 7. EJB Service Layer">Lab 7. EJB Service Layer</a></li><li><a href="/computer-science/mse/itmd-515/lab-8/" rel="bookmark" title="Lab 8. Java Server Faces">Lab 8. Java Server Faces</a></li><li><a href="/computer-science/mse/itmd-515/lab-9/" rel="bookmark" title="Lab 9. Web Application Security">Lab 9. Web Application Security</a></li></ul></div><div class="overview panel" data-title="Overview"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="Ruri Shimotsuki" data-src="/images/avatar.jpg"><p class="name" itemprop="name">Ruri Shimotsuki</p><div class="description" itemprop="description">琉璃的医学 & 编程笔记</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">303</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">68</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">73</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWU=" title="https:&#x2F;&#x2F;github.com&#x2F;amehime"><i class="ic i-github"></i></span> <span class="exturl item twitter" data-url="aHR0cHM6Ly90d2l0dGVyLmNvbS9hbWVoaW1l" title="https:&#x2F;&#x2F;twitter.com&#x2F;amehime"><i class="ic i-twitter"></i></span> <span class="exturl item zhihu" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3Blb3BsZS9hbWVoaW1l" title="https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;amehime"><i class="ic i-zhihu"></i></span> <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvdXNlci9ob21lP2lkPTEyODg2ODIz" title="https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;user&#x2F;home?id&#x3D;12886823"><i class="ic i-cloud-music"></i></span> <span class="exturl item telegram" data-url="aHR0cHM6Ly90Lm1lL2FtZWhpbWU=" title="https:&#x2F;&#x2F;t.me&#x2F;amehime"><i class="ic i-paper-plane"></i></span> <span class="exturl item about" data-url="aHR0cHM6Ly9hYm91dC5tZS9hbWVoaW1l" title="https:&#x2F;&#x2F;about.me&#x2F;amehime"><i class="ic i-address-card"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item dropdown"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a><ul class="submenu"><li class="item"><a href="/about/yume" rel="section"><i class="ic i-cloud"></i>自设</a></li></ul></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-magic"></i>链环</a><ul class="submenu"><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>友達</a></li><li class="item"><a href="/webstack/" rel="section"><i class="ic i-star"></i>网址</a></li></ul></li><li class="item"><span class="exturl" data-url="aHR0cHM6Ly90cmF2ZWxsaW5ncy5saW5r"><i class="ic i-paper-plane"></i>开往</span></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/computer-science/mse/itmm-571/lecture-3/" rel="prev" title="Previous Post"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/computer-science/mse/itmd-515/lab-6/" rel="next" title="Next Post"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>Random Posts</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="In 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/mse/" title="In Master of Software Engineering">Master of Software Engineering</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/mse/itmd-514/" title="In ITMD 514. Programming for Data Analytics">ITMD 514. Programming for Data Analytics</a></div><span><a href="/computer-science/mse/itmd-514/lab-3/" title="Lab 3">Lab 3</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="In 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/mse/" title="In Master of Software Engineering">Master of Software Engineering</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/mse/itmd-522/" title="In ITMD 522. Data Mining and Machine Learning">ITMD 522. Data Mining and Machine Learning</a></div><span><a href="/computer-science/mse/itmd-522/lecture-10/" title="Lecture 10. Classifications by Python">Lecture 10. Classifications by Python</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="In 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/mse/" title="In Master of Software Engineering">Master of Software Engineering</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/mse/itmd-510/" title="In ITMD 510. Object-Oriented App Develop">ITMD 510. Object-Oriented App Develop</a></div><span><a href="/computer-science/mse/itmd-510/week-13/" title="Week 13. Object Serialization, Network Programming">Week 13. Object Serialization, Network Programming</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="In 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/" title="In Java">Java</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/java/course-2/" title="In 面向对象程序设计 - Java 语言 - 浙江大学 - 翁恺">面向对象程序设计 - Java 语言 - 浙江大学 - 翁恺</a></div><span><a href="/computer-science/java/course-2/week-2/" title="第2周 对象交互">第2周 对象交互</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="In 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/mse/" title="In Master of Software Engineering">Master of Software Engineering</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/mse/itmd-515/" title="In ITMD 515. Advanced Software Programming">ITMD 515. Advanced Software Programming</a></div><span><a href="/computer-science/mse/itmd-515/lab-6/" title="Lab 6. JPA Relationships">Lab 6. JPA Relationships</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="In 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/mse/" title="In Master of Software Engineering">Master of Software Engineering</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/mse/itmd-511/" title="In ITMD 511. Application Development Methodologies">ITMD 511. Application Development Methodologies</a></div><span><a href="/computer-science/mse/itmd-511/chapter-5-6/" title="Chapter 5 &amp; 6">Chapter 5 & 6</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="In 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/mse/" title="In Master of Software Engineering">Master of Software Engineering</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/mse/itmd-534/" title="In ITMD 534. Human Computer Interaction">ITMD 534. Human Computer Interaction</a></div><span><a href="/computer-science/mse/itmd-534/midterm-exam/" title="Midterm Exam">Midterm Exam</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/clinical-medicine/" title="In 临床医学">临床医学</a> <i class="ic i-angle-right"></i> <a href="/categories/clinical-medicine/cardiovascular/" title="In 心血管病学">心血管病学</a> <i class="ic i-angle-right"></i> <a href="/categories/clinical-medicine/cardiovascular/echocardiography/" title="In 超声心动图">超声心动图</a> <i class="ic i-angle-right"></i> <a href="/categories/clinical-medicine/cardiovascular/echocardiography/valves/" title="In 第二阶段 Valves">第二阶段 Valves</a></div><span><a href="/clinical-medicine/cardiovascular/echocardiography/valves/course-6/" title="06. Aortic Regurgitaion and Echocardiographic Assessment 主动脉瓣反流超声心动图评估">06. Aortic Regurgitaion and Echocardiographic Assessment 主动脉瓣反流超声心动图评估</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="In 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/mse/" title="In Master of Software Engineering">Master of Software Engineering</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/mse/itmm-571/" title="In ITMM 571. Project Management">ITMM 571. Project Management</a></div><span><a href="/computer-science/mse/itmm-571/lecture-15/" title="Lecture 15. Lean">Lecture 15. Lean</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="In 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/mse/" title="In Master of Software Engineering">Master of Software Engineering</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/mse/itmd-511/" title="In ITMD 511. Application Development Methodologies">ITMD 511. Application Development Methodologies</a></div><span><a href="/computer-science/mse/itmd-511/midterm-exam/" title="Midterm Exam">Midterm Exam</a></span></li></ul></div><div><h2>Recent Comments</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2010 – <span itemprop="copyrightYear">2024</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">Ruri Shimotsuki @ Yume Shoka</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">3.4m 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">51:02</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"computer-science/mse/itmd-515/lab-5/",favicon:{show:"（●´3｀●）Goooood",hide:"(´Д｀)Booooom"},search:{placeholder:"Search for Posts",empty:"We didn't find any results for the search: ${query}",stats:"${hits} results found in ${time} ms"},valine:!0,fancybox:!0,copyright:'Copied to clipboard successfully! <br> All articles in this blog are licensed under <i class="ic i-creative-commons"></i>BY-NC-SA.',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script><script data-pjax>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?60ab4a51924a588bb4d810652c9412f1";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script></body></html>